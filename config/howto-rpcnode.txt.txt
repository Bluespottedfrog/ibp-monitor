How To: Deploy a RPC for polkadot

1) Install the polkadot binary and update the services file as necessary. 

We have provided an example services file titled "polkadot-rpc.service". There are a few important config settings that
you need for RPC services. These are:

--pruning archive # Sets node to store full blockchain archive
--rpc-methods safe # Sets node to only allow safe public calls
--rpc-cors all # Sets node to allow connetions from all sources

Once you complete editing your services file as desired, start & enable the service. 

2) Deploy SSL Certificate on haproxy node

We have provided an example configuration file for haproxy. Haproxy should be configured in a redundant way with at
least 2 nodes operating in failover. There will be multiple SSL certificates deployed on these haproxy nodes including
those under your own domain. The haproxy configuration is designed to listen on port 443, provide ssl service, and
terminate connections to the on-lan ws service port which was defined in the polkadot services file. Providing ssl on
top of ws turns it into wss.

You should deploy both rpc and ws service to provide both legacy and wss service. The haproxy configuration example
provided discriminates between the 2 and sends the correct connections to the correct backend ports.

This haproxy configuration example utilizes a directory to import certificates. You can place any number of certificates
in this directory to support multiple domains from the same frontend and backend configurations.

3) Test your rpc node. 

You can test services prior to #4 on your own domain. Testing the WSS service is very simple, you just need to load the
polkadot js wallet against your own public rpc.yourdomain.com domain name. 

https://polkadot.js.org/apps/?rpc=wss%3A%2F%2F1rpc.yourdomain.com%2Fkusama#/

If everything loads correct, you should be good to go!

4) Contact IBP geodns & anycast members to deploy

Ping the ibp members channel and let everyone know you're ready for geodns inclusion.


